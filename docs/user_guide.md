# あとで読む（読まない） - ユーザーガイド

Chrome拡張機能「あとで読む（読まない）」へようこそ！  
Webページ上のリンクやページ自体を右クリックから素早くメモと共に保存できるツールです。

---

## 📥 インストール方法

1. **Chromeの拡張機能ページを開く**
   - アドレスバーに `chrome://extensions/` と入力してEnter

2. **デベロッパーモードを有効化**
   - 右上の「デベロッパーモード」トグルをONにする

3. **拡張機能を読み込む**
   - 「パッケージ化されていない拡張機能を読み込む」をクリック
   - `src` フォルダを選択

4. **完了！**
   - 拡張機能がツールバーに表示されます

---

## 🚀 初回セットアップ

### 保存先ファイルの設定

1. **拡張機能アイコンをクリック**
   - ツールバーの拡張機能アイコンをクリック
   - 初回は自動的に設定画面が開きます

2. **ファイルを選択**
   - **新しいMDファイルを作成**: 新規にMarkdownファイルを作る
   - **既存のMDファイルを選択**: すでにあるファイルを使う

3. **保存場所を決定**
   - ファイルピッカーで保存場所とファイル名を選択
   - 推奨ファイル名: `link-memos.md`

---

## 💡 使い方

### 1. リンクを保存する

1. **リンク上で右クリック**
   - 保存したいリンクの上で右クリック

2. **「リンクをメモに保存」を選択**
   - コンテキストメニューから選択

3. **メモを入力**
   - URLは自動入力されます（編集可能）
   - メモ欄にリンクについての説明を入力
   - タグをカンマ区切りで入力（例：`技術, Chrome拡張, JavaScript`）

4. **保存**
   - 「保存」ボタンをクリック
   - 画面上部に「✓ 保存しました！」と表示されます

### 2. 選択範囲からURLを保存する

1. **テキストを選択**
   - URLを含むテキストやリンクテキストを選択

2. **右クリック**
   - 選択範囲で右クリック

3. **「選択範囲からURLを保存」を選択**
   - 自動的にURLを抽出します
   - リンク要素のhref属性を優先的に取得
   - テキスト内のURLも正規表現で抽出

4. **メモを入力して保存**
   - 通常のリンク保存と同じ

### 3. 現在のページを保存する

1. **ページ上で右クリック**
   - リンク以外の場所で右クリック

2. **「このページを保存」を選択**
   - 現在のページのURLとタイトルを自動取得

3. **メモを確認・編集して保存**
   - ページタイトルがメモに自動入力されます
   - 必要に応じて編集してください

### 4. 保存したメモを見る・管理する

1. **拡張機能アイコンをクリック**
   - 保存済みメモの一覧が表示されます

2. **検索する**
   - 上部の検索ボックスでリアルタイム検索
   - URL・メモ・タグから部分一致検索

3. **タグでフィルター**
   - タグをクリックすると、そのタグでフィルター

4. **編集・削除**
   - 各カードの「✏️ 編集」ボタンで編集
   - 「🗑️ 削除」ボタンで削除（確認あり）

5. **設定画面に移動**
   - 「⚙️ 設定」ボタンで設定画面へ
   - 設定画面からは「← 一覧に戻る」で戻れます

---

## 📝 保存されるデータの形式

Markdownファイルに以下の形式で保存されます：

```markdown
## 2026-02-07 17:30:45
- URL: https://github.com/chrome-extensions/samples
- メモ: Chrome拡張のサンプルコード集
- タグ: [技術, Chrome拡張, JavaScript]

---
```

### なぜMarkdown形式？

- **汎用性**: どのテキストエディタでも開ける
- **可読性**: 人間が読みやすい
- **移植性**: 他のツールへのエクスポートが簡単
- **バージョン管理**: Git等で管理しやすい
- **検索性**: `grep` や全文検索で簡単に見つかる

---

## ⚙️ 主な機能

### ✅ 実装済み機能

| 機能 | 説明 |
|------|------|
| **3種類の保存方法** | リンク右クリック、選択範囲、ページ右クリック |
| **タグ機能** | メモにタグを付けて分類 |
| **一覧表示** | 保存したメモをカード形式で表示 |
| **検索** | URL・メモ・タグから検索 |
| **編集・削除** | 保存済みメモの編集・削除 |
| **トースト通知** | 保存成功時に画面上部に通知 |
| **ダークテーマ** | 目に優しいモダンなUI |

---

## ⚠️ トラブルシューティング

### 「保存先ファイルが設定されていません」と表示される

**解決策**:

1. 拡張機能アイコンをクリック
2. 自動的に設定画面が開くので、ファイルを新規作成または選択
3. 再度リンク保存を試す

### 「ファイルへの書き込み権限がありません」と表示される

**原因**: ブラウザの再起動などで権限が失効した

**解決策**:

1. 拡張機能アイコンをクリック
2. 「⚙️ 設定」から「既存のMDファイルを選択」で同じファイルを再選択
3. 権限を再度許可する

### ポップアップが開かない

**確認事項**:

1. 必ず**リンク上**または**ページ上**で右クリックしているか
2. 拡張機能が有効になっているか（`chrome://extensions/`で確認）
3. アイコンは正しく表示されているか

### メモが保存されない

**確認事項**:

1. URLとメモの両方を入力しているか（どちらも必須）
2. ファイルが正しく選択されているか
3. ディスク容量は十分か

---

## 💡 便利な使い方

### タグの活用例

```
仕事関連 → 仕事, プロジェクト名
学習 → 技術, 言語名, 学習
参考資料 → 参考, リサーチ, 競合分析
あとで読む → 読む, 記事, ブログ
```

### 複数のファイルで管理

用途別に複数のMarkdownファイルを作成して使い分けることができます：

- `仕事メモ.md` - 仕事関連のリンク
- `技術メモ.md` - 技術記事
- `買い物リスト.md` - 商品ページ

設定画面から簡単に切り替えられます。

### Markdownビューアーで見る

保存したファイルを以下のツールで見ると便利です：

- **VSCode**: Markdown Preview
- **Obsidian**: ノート管理ツール
- **Typora**: Markdownエディタ
- **GitHub**: リポジトリにプッシュして閲覧

---

## 🔧 ファイル構成

```
src/
├── manifest.json          # 拡張機能の設定
├── background.js          # コンテキストメニュー管理
├── content.js            # 選択範囲のリンク検出
├── popup.html/js          # メモ入力UI
├── viewer.html/js         # 一覧表示UI
├── settings.html/js       # ファイル選択UI
├── db-helper.js           # IndexedDB操作
├── styles.css             # スタイルシート
└── icons/                 # アイコン画像
```

---

## 🎯 よくある質問（FAQ）

**Q: データはどこに保存されますか？**  
A: ユーザーが選択したローカルのMarkdownファイルに保存されます。クラウドには一切送信されません。

**Q: オフラインで使えますか？**  
A: はい、完全にオフラインで動作します。

**Q: データを他のPCに移行できますか？**  
A: Markdownファイルをコピーするだけで移行できます。

**Q: 他のブラウザでも使えますか？**  
A: Chromium系ブラウザ（Microsoft Edge、Brave等）で動作します。

**Q: スマホで使えますか？**  
A: Chrome拡張機能はモバイル版Chromeでは動作しません。

**Q: 大量のメモを保存しても大丈夫？**  
A: 数千件程度なら問題ありませんが、数万件を超えると検索が遅くなる可能性があります。その場合はファイルを分割することをお勧めします。

---

## 📄 ライセンス

MIT License

---

**この拡張機能について**:  
「あとで読む（読まない）」は、シンプルさと実用性を重視して作られました。  
保存して満足するあなたのために。🎸
